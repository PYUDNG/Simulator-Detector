<!DOCTYPE html>
<script>!function(){const a=window.EventTarget.prototype.addEventListener,n=window.EventTarget.prototype.removeEventListener,l=new Map,p={CustomEvent:CustomEvent,Error:Error,Element:Element,toString:Object.prototype.toString,getPrototypeOf:Object.getPrototypeOf,defineProperty:Object.defineProperty,defineProperties:Object.defineProperties,reduce:Array.prototype.reduce,forEach:Array.prototype.forEach,from:Array.from,push:Array.prototype.push,querySelectorAll:Element.prototype.querySelectorAll,add:Set.prototype.add,preventDefault:Event.prototype.preventDefault,stopImmediatePropagation:Event.prototype.stopImmediatePropagation,set:Map.prototype.set,has:Map.prototype.has,get:Map.prototype.get},i=(Object.defineProperties(Function.prototype,{call:{value:Function.prototype.call,writable:!1,configurable:!1,enumerable:!0},apply:{value:Function.prototype.apply,writable:!1,configurable:!1,enumerable:!0}}),new EventTarget);p.defineProperty(window,"simulatorDetector",{value:i,writable:!1,configurable:!1,enumerable:!0}),window.EventTarget.prototype.addEventListener=function(e,t,r){var o=[...arguments];function n(e){if(!e.isTrusted)return i.dispatchEvent(new p.CustomEvent("detect",{detail:{target:this,event:e,stack:(new p.Error).stack}})),p.preventDefault.call(e),p.stopImmediatePropagation.call(e),!1;t.apply(this,arguments)}u(this)&&(o[1]=n,p.set.call(l,t,n),c(e)),a.apply(this,o)},window.EventTarget.prototype.removeEventListener=function(e,t,r){var o=[...arguments];u(this)&&t&&p.has.call(l,t)&&(o[1]=p.get.call(l,t)),n.apply(this,o)};for(const t of document.querySelectorAll("*"))o(t);var e=new MutationObserver(function(e,t){e=p.reduce.call(e,(e,t)=>(e.push.apply(e,t.addedNodes),e),[]),e=p.reduce.call(e,(t,e)=>(u(e)&&(p.add.call(t,e),p.forEach.call(p.from.call(Array,p.querySelectorAll.call(e,"*")),e=>p.add.call(t,e))),t),new Set);for(const r of e)o(r)});function c(e){const t=[];function r(e){e.isTrusted||(i.dispatchEvent(new p.CustomEvent("detect",{detail:{target:e.target,event:e,stack:(new p.Error).stack}})),p.preventDefault.call(e),p.stopImmediatePropagation.call(e))}(c=function(e){if(t.includes(e))return!1;a.call(document,e,r,{capture:!0}),p.push.call(t,e)})(e)}function o(t){try{p.defineProperties(t,{addEventListener:{value:window.EventTarget.prototype.addEventListener,writable:!1,configurable:!1,enumerable:!1},removeEventListener:{value:window.EventTarget.prototype.removeEventListener,writable:!1,configurable:!1,enumerable:!1}})}catch(e){i.dispatchEvent(new p.CustomEvent("bypass",{detail:{error:e,element:t}}))}}function u(e){if(e instanceof p.Element)return 1;for(;;){if(!e)return;if("[object Element]"===p.toString.call(e))return 1;e=p.getPrototypeOf(e)}}e.observe(document,{childList:!0,subtree:!0}),[EventTarget.prototype,i].forEach(e=>Object.freeze(e))}();</script>
<html>
<head>
	<meta charset="utf-8">
	<title>Simulator Detector Demo</title>
	<style>body {text-align: center; font-size: 5vmin;}</style>
	<script type="text/javascript" src="app.js"></script>
</head>
<body>
	<div id='question'></div>
	<input type="text" id="answer">
	<button id='submit'>Submit</button>
</body>
</html>